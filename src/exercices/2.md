# Les hooks et TypeScript

C'est parties pour ajouté à notre tic tac toe quelques fonctionnalités avancées.

On va commencé par ajouté un state pour définir nos squares puis on va ajouté
les pseudos de notre utilisateurs via un forumlaire.

Au fur et à mesure de ton avancées, je vais ranger les composants dans des fichiers.
J'ai créer [Board] et [Square](../lib/) dans des dossiers pour que tu puisse faire
les exercices avec moins de code qui pollus le sujet.

## Part 1 : Ajout d'un state pour les squares

Pour commencer, on va ajouté un state pour définir nos squares.

La valeur par défaut de ce state sera la fonction `getDefaultSquares` que l'on à déjà créer
dans l'exercice précédent.

Tu pourras l'utiliser dans le state de ton composant `App`. Je vais te demander de créer
un type `SquareValue` qui sera soit `null`, soit `X` ou `O`.

Le type SquareValue on l'a déjà créer dans l'exercice précédent, tu peux utiliser le type
qui viens de [helpers.ts](../lib/tictactoe/helpers.ts) afin de ne pas avoir à le recréer.

## Part 2 : Ajout du formulaire pour les pseudos

On va maintenant ajouté un formulaire pour définir les pseudos de nos joueurs.

Tu vas créer un composant `UserNamesForm` qui contiendera 2 références :

- `userXRef` : Une référence vers un input
- `userORef` : Une référence vers un input

Et que tu utiliseras comme ceci :

```jsx
<form onClick={onSubmit}>
  <label htmlFor="user1">User X</label>
  <input id="user1" ref={userXRef} required minLength={2} />
  <label htmlFor="user2">User O</label>
  <input id="user2" ref={userORef} required minLength={2} />
  <button type="submit">Submit</button>
</form>
```

Tu dois typé correctement ses 2 ref ainsi que la fonction `onSubmit`.

Notre composants prend en paramètre `onUserNamesSubmitted` qui est une fonction qui prend
en paramètre un objet avec les pseudos des joueurs. (il faudra définit le type `UserNamesFormProps`)

Tu vas devoir créer un type qui définit cet objet.

- une valeur `X` qui est une string ou null
- une valeur `O` qui est une string ou null

Il faudra dans la fonction onSubmit de notre formulaire, appelé cette fonction `onUserNamesSubmitted`

Ensuite tu devras créer un state dans le composant `App` qui contiendra les pseudos des joueurs
en utilisant le type créer juste avant.

Si les pseudos sont pas définit, on affiche le formulaires, sinon on affiche le plateau de jeu.

Y'a du boulot ! Bonne chance !

## Part 3 : Afficher les pseudos

Dans le composant `GameInfo` j'aimerais bien affiché les pseudos.

Voici le JSX pour le faire :

```jsx
<div className="flex gap-3 center">
  <span>
    <b>X</b>:{userNames.X}
  </span>
  <span>VS</span>
  <span>
    <b>O</b>:{userNames.O}
  </span>
</div>
```

Tu devras ajouté une props `userNames` qui sera de type `UserNames` (que tu as créer juste avant)

## Part 4 : Définir des types non optionnelles [BONUS]

Tu l'as peut-être remarqué, notre type `UserNames` a comme valuer X et O mais ses
deux valeurs peuvent être optinelles.

Tu as peut-être fait la duplication de code pour être sûr que ses types était pas optionelle.

Mais TypeScript est magique, et on peut créer un type "utilitaire" qui va rendre
toutes les propriétés de `UserNames` non optionnelles.

⚠️ Ce n'est pas un exercice facile.

Il est volontairement compliqué et demande une grande maîtrise de TypeScript.

Je te donne si tu le veux le type qui te permet de faire ça :

```ts
type DeepNonNullable<T> = {
  [P in keyof T]: NonNullable<T[P]>;
};
```

Je te laisse par contre essayé de l'utilisé dans notre application.

Ce qui sera intéressant pour toi, c'est de te battre avec TypeScript, tu verras
c'est très drôle (ou énervant).

Regarde la vidéo solution pour **tout** comprendre sur ce petite parties 4.
